<!DOCTYPE html><html lang="cn" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>口蘑の小窝 | 口蘑の小窝</title><meta name="author" content="Kumoxjq"><meta name="copyright" content="Kumoxjq"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="LCD液晶层改变了光的振动方向 LED 发光二极管 三角形是最基础的多边形三个点构成平面三角形内外定义是明确的,用向量叉乘 采样判断一个像素的中心点是否在经过 MVP 变换后的已经是二维平面的三角形数据中 采样是把一个连续的函数给离散化的过程 生活中例如时间 空间 方向 区域 都可以被采样 inside 函数（tri,x,y） 出 1 或 0 inside 函数如何判断的具体算法知道 4 个点，三">
<meta property="og:type" content="article">
<meta property="og:title" content="口蘑の小窝">
<meta property="og:url" content="http://example.com/2024/12/03/101/index.html">
<meta property="og:site_name" content="口蘑の小窝">
<meta property="og:description" content="LCD液晶层改变了光的振动方向 LED 发光二极管 三角形是最基础的多边形三个点构成平面三角形内外定义是明确的,用向量叉乘 采样判断一个像素的中心点是否在经过 MVP 变换后的已经是二维平面的三角形数据中 采样是把一个连续的函数给离散化的过程 生活中例如时间 空间 方向 区域 都可以被采样 inside 函数（tri,x,y） 出 1 或 0 inside 函数如何判断的具体算法知道 4 个点，三">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/img/butterfly-icon.png">
<meta property="article:published_time" content="2024-12-03T10:32:13.508Z">
<meta property="article:modified_time" content="2024-12-03T10:34:41.602Z">
<meta property="article:author" content="Kumoxjq">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/butterfly-icon.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/12/03/101/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '口蘑の小窝',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">口蘑の小窝</span></a><a class="nav-page-title" href="/"><span class="site-name">口蘑の小窝</span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">Untitled</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-12-03T10:32:13.508Z" title="Created 2024-12-03 18:32:13">2024-12-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-12-03T10:34:41.602Z" title="Updated 2024-12-03 18:34:41">2024-12-03</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>LCD<br>液晶层改变了光的振动方向</p>
<p>LED 发光二极管</p>
<p>三角形是最基础的多边形<br>三个点构成平面<br>三角形内外定义是明确的,用向量叉乘</p>
<p>采样<br>判断一个像素的中心点是否在经过 MVP 变换后的已经是二维平面的三角形数据中</p>
<p>采样是把一个连续的函数给离散化的过程</p>
<p>生活中例如时间 空间 方向 区域 都可以被采样</p>
<p>inside 函数（tri,x,y） 出 1 或 0</p>
<p>inside 函数如何判断的具体算法<br>知道 4 个点，三个点轮流连接被判断点，</p>
<p>如果一个点正好在三角形的边上呢？<br>101 中对这种情况不做处理<br>但是在 OPENGL 或者 directx 中，各自有非常严格的规定</p>
<p>在考虑某一个三角形的光栅化时，难道需要把整个屏幕的点都遍历一遍吗？<br>没有必要<br>所以根据三角形的区域，就需要一个检测的包围盒 boundingbox</p>
<p>三角形中取三点的最小和最大点，就知道了这个包围盒的范围</p>
<p>axis-aligned boundingbox 轴向包围盒 AABB</p>
<p>更好的</p>
<hr>
<p>开始放显示屏幕的像素排列，什么 iphone 手机 显示器像素排列 钻石排列 RGB</p>
<hr>
<p>101 中对像素的定义还是一个小方块</p>
<hr>
<p>锯齿 jaggies Aliasing 走样</p>
<hr>
<h1 id="06-反走样和深度缓冲"><a href="#06-反走样和深度缓冲" class="headerlink" title="06 反走样和深度缓冲"></a>06 反走样和深度缓冲</h1><p>复习：视口变换和光栅化<br>采样：点是否在三角形中<br>走样<br>eg：采样让我想到了光学显微镜和电镜的区别<br>人眼看到世界的原理</p>
<p>Artifact 错误、瑕疵</p>
<ul>
<li>锯齿</li>
<li>摩尔纹</li>
<li>视觉残留</li>
</ul>
<p>产生原因：<br>信号变化太快，导致采样速度够不到信号变化</p>
<p>给一个模糊，再采样就可以一定程度消除走样</p>
<p>下面开始介绍具体原理</p>
<h2 id="频率、频域"><a href="#频率、频域" class="headerlink" title="频率、频域"></a>频率、频域</h2><p>sin 和 cos<br>傅里叶展开<br>任何函数都可以被正余弦函数表示</p>
<p>傅里叶级数展开和傅里叶变换不是一回事</p>
<p>更高的频率需要更高，更频繁的采样</p>
<p>采样出现的情况<br>采样两个频率完全不同的频率函数，可能出现完全一样的结果，这就是走样</p>
<h2 id="滤波"><a href="#滤波" class="headerlink" title="滤波"></a>滤波</h2><p>抹掉特定范围的频率</p>
<p>eg：高通滤波会滤掉低频信息，剩下的就是例如人物和背景的交接部分，这种滤波是不是可以做类似人物残影的特效？</p>
<ul>
<li>高通滤波</li>
<li>低通滤波</li>
<li>中通滤波</li>
</ul>
<h1 id="convolution-卷积"><a href="#convolution-卷积" class="headerlink" title="convolution 卷积"></a>convolution 卷积</h1><p>简单来说，卷积就是平均</p>
<p>卷积定理<br>滤波器—-卷积核—-box filter</p>
<p>正常图片是时域，傅里叶变换后就是频域<br>一个图片与一个滤波进行卷积得到的图片<br>将图片和卷积核都进行傅里叶变换后相乘的结果作逆傅里叶变换</p>
<p>采样是重复在频域上重复的内容</p>
<p>具体的滤波器如何设置<br>三角形覆盖一个像素的多少，进行平均</p>
<h1 id="MSAA"><a href="#MSAA" class="headerlink" title="MSAA"></a>MSAA</h1><ul>
<li>模糊操作</li>
<li>采样<br>对于任何一个像素中，进行更小像素的划分，把 1 个 pixel 变成 4x4 的 pixel<br>比如在 2x2 方法中，一个小像素中有 3 个小小像素在三角形中，那这个位置的小像素就是 75%<br>MSAA 没有提高采样率</li>
</ul>
<h2 id="FXAA-Fast-Approximate-AA"><a href="#FXAA-Fast-Approximate-AA" class="headerlink" title="FXAA Fast Approximate AA"></a>FXAA Fast Approximate AA</h2><p>图像的后期处理<br>和采样无关</p>
<h2 id="TAA-Temporal-AA"><a href="#TAA-Temporal-AA" class="headerlink" title="TAA Temporal AA"></a>TAA Temporal AA</h2><p>找上一帧的信息<br>在 MSAA 需要的算力分布到了时间中</p>
<h1 id="与抗锯齿相关的概念-–超分辨率-DLSS-Deep-Learning-SuperSample"><a href="#与抗锯齿相关的概念-–超分辨率-DLSS-Deep-Learning-SuperSample" class="headerlink" title="与抗锯齿相关的概念 –超分辨率 DLSS Deep Learning SuperSample"></a>与抗锯齿相关的概念 –超分辨率 DLSS Deep Learning SuperSample</h1><p>使用深度学习来补足不够的采样，这就靠深度学习的人工智能来做的了，让 AI 来猜<br>手段不同，但目的和放采样是一样的。</p>
<hr>
<h1 id="07-Z-buffering-深度缓冲"><a href="#07-Z-buffering-深度缓冲" class="headerlink" title="07 Z buffering 深度缓冲"></a>07 Z buffering 深度缓冲</h1><p>怎么处理遮挡与可见性</p>
<p>顺序问题<br>最直觉的想法，先画远处的，再画近处的，这样正确地处理了近处的物体并遮挡住了远处的物体<br>这个最开始的处理，叫做画家算法 painter‘s algorithm：新画的东西永远会覆盖旧的东西</p>
<p>定义深度其实不容易</p>
<p>遇到难题了：三个互相遮挡的三角形，画家算法无法处理</p>
<p>人们引入 Zbuffer 算法来解决<br>生成两个结果<br>一个是 framebuffer 保存颜色正常信息<br>一个是 depthbuffer 保存深度信息</p>
<p>一开始的深度都是无限远<br>在每一个像素内的深度</p>
<p>深度缓存发生在每一个像素中</p>
<p>这样就可以维护一个逐像素的深度<br>复杂度是 O(n)，画家算法是 nlogn</p>
<p>深度缓存和顺序没有关系</p>
<p>当深度相同时并没有说怎么处理<br>目前几乎所有的光栅化都会做这样的深度缓存</p>
<p>作业 2 中有对 MSAA 算法做深度缓存<br>从一个像素中做深度缓存，对一个像素中的小采样点进行深度缓存</p>
<p>—–光栅化结束<br>无法处理透明度</p>
<hr>
<h2 id="着色-Shading"><a href="#着色-Shading" class="headerlink" title="着色 Shading"></a>着色 Shading</h2><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>首先我们有了模型，对模型的三维数据进行 MVP 变换<br>先从世界坐标变成局部坐标<br>再把局部坐标变成摄像机的坐标系<br>再把摄像机的坐标系变成屏幕二维的坐标系，也就是投影变换<br>有了二维中的一个个点数据，这时候我们来处理一个个像素如何显示，这就到了采样和光栅化</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>引入颜色和明暗的不同<br>在 101 中的定义是，在不同的物体中应用不同材质的过程</p>
<h4 id="blinn-phong"><a href="#blinn-phong" class="headerlink" title="blinn-phong"></a>blinn-phong</h4><ul>
<li>specular</li>
<li>diffuse</li>
<li>ambient 环境光照在这里不具体计算，只取一个出常数<br>此时的着色仍然是局部的，物体之间遮挡产生的阴影并不在着色的考虑中<br>着色只考虑自身</li>
</ul>
<p>– 漫反射 Diffuse Reflection<br>介绍 Lambert’s cosine law<br>每个点上接受的光照能量多少使用 Diffuse &#x3D; 光线向量 点乘 法线</p>
<h4 id="光的衰减"><a href="#光的衰减" class="headerlink" title="光的衰减"></a>光的衰减</h4><p>平方反比定律</p>
<p>max（0，n·l），剔除掉从背面照射的光线</p>
<p>ld 是一个表示多少能量被物体吸收的系数，被叫做漫反射系数，把这个表示成三维向量，也就是 RGB 数值，就可以描述这个点的颜色</p>
<p>漫反射与摄像机，或者说人眼没有关系</p>
<p>07 这节课的内容是这样</p>
<hr>
<hr>
<h1 id="Lecture8-Shadeing-2"><a href="#Lecture8-Shadeing-2" class="headerlink" title="Lecture8 Shadeing 2"></a>Lecture8 Shadeing 2</h1><p>内容：补齐 blinnphong，讲解管线和贴图映射</p>
<h3 id="高光-specular"><a href="#高光-specular" class="headerlink" title="高光 specular"></a>高光 specular</h3><p>从视线方向接近镜面反射的反射向量的方向，发现视线方向和光线向量的中间的半城向量。<br>这个 h 半程向量和这个点的法线 n 越接近，就能看到更多的高光</p>
<p>$$<br>h &#x3D; v + l&#x2F;丨v + l丨<br>$$</p>
<h5 id="cos-的指数"><a href="#cos-的指数" class="headerlink" title="cos 的指数"></a>cos 的指数</h5><p>在 cos 上加指数，随着指数增加，最快的到达 0<br>在高光中，一般取 100~200<br>高光只有一个小店</p>
<h3 id="环境光"><a href="#环境光" class="headerlink" title="环境光"></a>环境光</h3><p>假设一个点中接受到的环境光的大小是一个常数 Ia</p>
<h2 id="Shadeing-frequency-着色频率"><a href="#Shadeing-frequency-着色频率" class="headerlink" title="Shadeing frequency 着色频率"></a>Shadeing frequency 着色频率</h2><ul>
<li>逐面 flatshading</li>
<li>逐顶点 高洛德着色 Gouraud shading</li>
<li>逐像素 phong shading （不是 blinnphong）</li>
</ul>
<p>问题 1：顶点的法线怎么算？我现在只知道一个面，一个三角形面的法线怎么算<br>顶点的法线是这个点相邻面的法线的平均 根据面的面积加权平均</p>
<p>问题 2：像素的法线怎么算？<br>插值算法，重心坐标</p>
<p>—渲染管线</p>
<h2 id="渲染管线"><a href="#渲染管线" class="headerlink" title="渲染管线"></a>渲染管线</h2><pre><code>其中的顶点和fragment部分是可编程的，这就是shader代码干的事
</code></pre>
<p>后面扯了一点 GPU 的事</p>
<h2 id="纹理映射"><a href="#纹理映射" class="headerlink" title="纹理映射"></a>纹理映射</h2><p>扯了下 UV，每个漫反射前面有个变量，这个地方的颜色给贴图的每个点的颜色</p>
<h1 id="Lecture9-Shading03-着色结束-贴图映射应用"><a href="#Lecture9-Shading03-着色结束-贴图映射应用" class="headerlink" title="Lecture9 Shading03 着色结束 贴图映射应用"></a>Lecture9 Shading03 着色结束 贴图映射应用</h1><h3 id="如何在三角形内部进行任意点的插值-重心坐标"><a href="#如何在三角形内部进行任意点的插值-重心坐标" class="headerlink" title="如何在三角形内部进行任意点的插值 重心坐标"></a>如何在三角形内部进行任意点的插值 重心坐标</h3><p>Barycentric Coordinates 重心坐标<br>α β γ<br>相当一个三角形专用的坐标轴，用 α β γ 来表示三角形这个坐标系中的一个点</p>
<h3 id="贴图太小了怎么办？"><a href="#贴图太小了怎么办？" class="headerlink" title="贴图太小了怎么办？"></a>贴图太小了怎么办？</h3><p>texel 纹理元素 纹素</p>
<h4 id="双线性插值-Bilinear-interpolation"><a href="#双线性插值-Bilinear-interpolation" class="headerlink" title="双线性插值 Bilinear interpolation"></a>双线性插值 Bilinear interpolation</h4><h4 id="Bicubic-这回取-4x4"><a href="#Bicubic-这回取-4x4" class="headerlink" title="Bicubic 这回取 4x4"></a>Bicubic 这回取 4x4</h4><h3 id="贴图太大了怎么办？"><a href="#贴图太大了怎么办？" class="headerlink" title="贴图太大了怎么办？"></a>贴图太大了怎么办？</h3><p>Range Query 不做采样 给一个区域，立刻得到里面的平均值</p>
<h4 id="mipmap-允许做范围查询-快速-近似-正方形范围查询"><a href="#mipmap-允许做范围查询-快速-近似-正方形范围查询" class="headerlink" title="mipmap 允许做范围查询 快速 近似 正方形范围查询"></a>mipmap 允许做范围查询 快速 近似 正方形范围查询</h4><p>三线性插值 解决平滑过度不同层级的 mipmap 的问题<br>Trilinear interpolation<br>先做两次双线性插值，再做一次两者之间的插值</p>
<h4 id="MIPMAP-的限制"><a href="#MIPMAP-的限制" class="headerlink" title="MIPMAP 的限制"></a>MIPMAP 的限制</h4><p>在远处会出现过度模糊，细节丢失，mipmap 出错了</p>
<h4 id="各向异性过滤-Anisotropic-Filter-一定解决了这个问题"><a href="#各向异性过滤-Anisotropic-Filter-一定解决了这个问题" class="headerlink" title="各向异性过滤 Anisotropic Filter 一定解决了这个问题"></a>各向异性过滤 Anisotropic Filter 一定解决了这个问题</h4><p>给正方形拉伸成各种矩形，但仍然是矩形 ripmap<br>在不同的方向上表现不同 — 各向异性<br>开销是原本的三倍<br>mipmap 额外的开销只有原本的三分之一<br>2x 压缩一次<br>4x 压缩二次</p>
<p>从屏幕像素映射到 UV 上，不一定是正方形的形状，此时使用正方形的 mipmap 效果就不行</p>
<p>其他的方法：EWA 过滤 对任一不规则形状，给拆成不同的圆形</p>
<p>目前 光栅化中，除了阴影基本都涵盖了<br>接下来补全纹理后就是几何</p>
<h1 id="Lecture-10：Geometry-几何"><a href="#Lecture-10：Geometry-几何" class="headerlink" title="Lecture 10：Geometry 几何"></a>Lecture 10：Geometry 几何</h1><h2 id="纹理的应用-Application-of-geometry"><a href="#纹理的应用-Application-of-geometry" class="headerlink" title="纹理的应用 Application of geometry"></a>纹理的应用 Application of geometry</h2><ul>
<li>mipmap</li>
<li>纹理可以理解成 GPU 中的一块内存，可以做点查询，可以做范围查询，可以理解成一个数据</li>
<li></li>
<li>环境光照（环境贴图）Environment Map -在环境贴图中，只记录方向，不记录位置与大小，没有实际的深度意义</li>
<li>环境光 -一个完全反射的球，一个存储环境光的方法，这个球面上就是这个环境光的信息，把这个球展开就是环境光照贴图；<br>-Spherical Environment Map<br>展开后在矩形的贴图里会有严重的扭曲问题，类比世界地图，越靠近极点，越扭曲<br>办法：CubeMap<br>把光照信息从一个球的表面变成存在一个正方形的表面，从一个矩形贴图变成了 6 张贴图拼接的正方形展开贴图</li>
</ul>
<hr>
<p>图形学的经典茶壶叫犹他茶壶<br>还有斯坦福兔子和斯坦福龙<br>康奈尔盒子<br>blender 里的猴头</p>
<hr>
<h4 id="纹理也可以影响-shading"><a href="#纹理也可以影响-shading" class="headerlink" title="纹理也可以影响 shading"></a>纹理也可以影响 shading</h4><ul>
<li>法线贴图</li>
<li>深度贴图</li>
<li>偏移贴图</li>
<li>………………</li>
</ul>
<h4 id="Normal-Map-Bump-Map"><a href="#Normal-Map-Bump-Map" class="headerlink" title="Normal Map&#x2F;Bump Map"></a>Normal Map&#x2F;Bump Map</h4><p>将原本的法线按照法线贴图进行偏移<br>如何计算？<br>in flatland case<br>假设一个平面 n&#x3D; (0.1)<br>贴图的曲线的导数（斜率）计算，算出切线（方程）<br>如何从切线变成法线？法线是垂直于切线的向量，切线逆时针旋转 90 度。<br>此时的切线向量的表示（1，dp），从 xy 坐标的角度看逆时针旋转，是 xy 对换，dp 取负，得到法线向量表示（-dp，1）</p>
<p>in 3D<br>原来的光滑法线是（0，0，1）<br>u 变化的导数<br>v 变化的导数<br>这样法线贴图的 n（-dp&#x2F;du,-dp&#x2F;dv,1）</p>
<p>在这里假设的情况原先的表面法线都是垂直向上的。<br>只说了简单的原理，没说完全</p>
<h4 id="偏移-位移贴图-DisplacementMap"><a href="#偏移-位移贴图-DisplacementMap" class="headerlink" title="偏移&#x2F;位移贴图 DisplacementMap"></a>偏移&#x2F;位移贴图 DisplacementMap</h4><p>位移贴图对三角形的顶点真正的移动</p>
<p>Directx 提供了一个 api，动态曲面细分，会根据需要细分模型网格</p>
<h4 id="纹理也可以是三维的"><a href="#纹理也可以是三维的" class="headerlink" title="纹理也可以是三维的"></a>纹理也可以是三维的</h4><p>3D Procedural Noise + Solid Modeling<br>柏林噪声</p>
<h4 id="纹理也可以记录之前已经算好了信息"><a href="#纹理也可以记录之前已经算好了信息" class="headerlink" title="纹理也可以记录之前已经算好了信息"></a>纹理也可以记录之前已经算好了信息</h4><p>Ambient occlusion texture map 环境光遮蔽贴图</p>
<p>三维纹理被广泛应用在体积的渲染<br>Volume Rendering 医学影响领域<br>纹理的概念被广泛的衍生了，绝不仅仅是 2D</p>
<p>这里补全了上节课的 shading</p>
<h2 id="开始几何的部分"><a href="#开始几何的部分" class="headerlink" title="开始几何的部分"></a>开始几何的部分</h2><p>机械几何 布料几何 液体几何 描述城市的几何 城市的屋子 屋子的窗户 城市中的树 草地<br>毛发模拟 甚至到细胞 分子 的微观几何<br>树的几何</p>
<p>分类：</p>
<ul>
<li>Implicit 隐式几何</li>
<li>Explicit 显式几何</li>
</ul>
<h4 id="隐式几何"><a href="#隐式几何" class="headerlink" title="隐式几何"></a>隐式几何</h4><p>定义：<br>告诉这个物体中点与点之间的关系<br>例如：球，在三维中 xyz 平方和为 1。<br>定义任何 xyz 满足某个关系，也就是函数，F(x,y,z)&#x3D;0，这就是隐式几何<br>好处和坏处：<br>哪些点在这个几何函数上？<br>直接从函数上看，是很难知道它是什么形状的<br>但是如果判断这个点在不在这个几何上，是非常容易的，只需要带入函数就行了，正数是物体外，负数在物体内，正好为 0 就是在物体上。</p>
<h4 id="显式几何"><a href="#显式几何" class="headerlink" title="显式几何"></a>显式几何</h4><p>定义：<br>比如三角形的直接表示，或者参数映射的方法，从 uv 二维映射到三维的 xyz 上。这个映射也是函数<br>从 uv 到 xyz，<br>ps:个人感觉就是从二维上看，就是显式</p>
<p>显式好找所有的点，只要找所有的 uv 上的店<br>坏处呢？<br>难以判断一点在不在这个物体的内外关系</p>
<p>根据需要分两种方法来处理几何<br>没有什么完全的办法来解决几何的问题</p>
<p>还有非常多的隐式几何的案例<br>三维球 三维圆环 很难直接看函数知道几何的形状</p>
<p>Constructive Solid Geometry CSG 也是一种隐式表示方法<br>布尔运算 a 和 b 的并集 交集 差集<br>将一个原始几何体当做一个单位几何体 比如正方体 球体 用无数个这种基础几何体来组成复杂的几何</p>
<p>还有一种隐式方法 距离函数 Distance Functions<br>案例：两个球的不断融合，拖布结构的改变，对几何距离函数做了一个融合 blend<br>距离函数指空间中的一个点对一个几何体的最短距离，<br>再举例：距离函数的应用：希望求出一个动画中已知始终状态，求中间状态 与运动有关<br>SDF（A）与 SDF（B） blend 两个 SDF<br>任何一个点对一个边界的最短函数，可以很直观的 blend 两者的边界，是一种新的表示方式来正确表示的边界的运动<br>案例 2：正方体和圆形进行 blend，用 DF 可以进行两个形状的融合<br>shadertoy 中的蜗牛几何，使用的是距离函数</p>
<p>Level Set 水平集方法，和距离函数类似<br>用一个格子来存储几何信息？<br>函数本身的表示形式改成了格子，但是实际上还是要函数 fx&#x3D;0，水平集我们早就见过了，地图等高线，等一系列地图，就是这种表示<br>水平集也可以定义在三维中，和纹理串了起来 应用在 CT MRI<br>水平集也可以应用在物理模拟中，来模拟水滴之间的 blend</p>
<p>分形 Fractals<br>定义：自相似 和 CS 中的递归类似<br>比如雪花，特殊的西蓝花。 坏处是在渲染时会引起强烈的走样，因为有极多的细节。</p>
<p>隐式表示起来非常容易，或者是例如距离函数来表示，对存储有利，内外判断方便。<br>隐函数来表述隐式表面，容易求解表面和光线的求交</p>
<p>几何总的来说就是找到一个方法来表示形状<br>之后就是显式，隐式更重要。</p>
<h1 id="Lecture-11-几何-2-曲线-Curves-and-Surface"><a href="#Lecture-11-几何-2-曲线-Curves-and-Surface" class="headerlink" title="Lecture 11 几何 2 曲线 Curves and Surface"></a>Lecture 11 几何 2 曲线 Curves and Surface</h1><p>开始补显式几何：</p>
<h2 id="显式"><a href="#显式" class="headerlink" title="显式"></a>显式</h2><p>三角 mesh</p>
<ul>
<li>point cloud 点云<br>最简单的表述，需要非常多的点</li>
<li>Polygon Mesh 多边形面（最常用）<br>三角形的连接关系，<br>obj file，object file 顶点 法线 纹理坐标 表示<br>例如：一个立方体 8 个点 6 个面法线 24 个纹理坐标<br>face 来定义哪三个点组成一个三角形<br>v&#x2F;vt&#x2F;vn</li>
</ul>
<p>显式就先这样</p>
<h2 id="曲线-Curves"><a href="#曲线-Curves" class="headerlink" title="曲线 Curves"></a>曲线 Curves</h2><p>案例：摄像机运动曲线 Animation Curves 让物体沿着曲线移动 Vector Fonts<br>贝塞尔曲线 Bezier Curves<br>定义：用一系列的控制点来定义曲线<br>怎么计算&#x2F;画贝赛尔曲线<br>贝塞尔算法 二次贝塞尔曲线<br>从画线转化成了怎么找一个点<br>递归算法 由参数 t 控制<br>前面解释了几何上的原理，代数上有没有一个式子来表示这个贝塞尔算法？</p>
<p>伯恩斯坦多项式 二项分布多项式</p>
<p>把控制点坐标改成三维坐标，就可以在三维中应用贝塞尔曲线了</p>
<p>贝塞尔曲线的性质：<br>必须过起点和终点<br>对仿射变换非常适合</p>
<p>凸包性质 什么是 Convex Hull 凸包<br>凸包定义： 一个圈，一个围着几个钉子的皮筋<br>Piecewise Bezier Curve 逐段贝塞尔曲线 在每个控制点上多了曲柄<br>每段曲线被细分到 4 个控制点，然后在不断的连起来<br>问题来了，怎么保证连接点是光滑的呢？<br>当两端的曲柄（控制点）是同线，长度差不多的时候，就光滑了，切线方向一致</p>
<p>切线的连续与几何的连续 第一段的终点等于第二段的起点 叫做 c0 连续<br>如果切线也连续，更一层的叫 C1 连续 c1 连续且可导</p>
<p>–其他类型的曲线 spline 样条<br>一个可控的曲线叫做样条<br>伯恩斯坦多项式 伯恩斯坦基函数</p>
<p>B-splines B-basic 对贝塞尔曲线的扩展<br>原来的贝塞尔动一个就会动全部的线<br>现在我只想改其中一个 好处就是局部性 没讲原理 极其复杂 最复杂</p>
<p>还有 nurbs 曲线 NURBS 更加复杂</p>
<h2 id="曲面-Surfaces"><a href="#曲面-Surfaces" class="headerlink" title="曲面 Surfaces"></a>曲面 Surfaces</h2><p>贝塞尔曲面 Bezier Surface<br>如何用贝塞尔曲线得到贝塞尔曲面？<br>4x4 个控制点<br>在两个方向上分别应用贝塞尔曲线<br>不同的贝塞尔曲线怎么拼在一起保证严丝合缝？101 中不细讲<br>找到贝塞尔曲面上任意一点，需要两个时间 t，二维数据，也就是 UV</p>
<p>Mesh Operations 几何处理 网格操作<br>三角形网格<br>网格细分 Mesh subdivision<br>网格简化 Mesh simplification<br>Mesh regularizaton 让三角形的大小比较统一，三角线的形状也大致变成正三角形<br>网格正则化</p>
<hr>
<hr>
<h1 id="Lecture-12-Geometry-3"><a href="#Lecture-12-Geometry-3" class="headerlink" title="Lecture 12 Geometry 3"></a>Lecture 12 Geometry 3</h1><p>几何的最后一部分</p>
<p>T&#x2F;N&#x2F;B 计算<br>2020 年的图形学得到图灵奖</p>
<p>Mesh Operation</p>
<h3 id="Subdivison-细分"><a href="#Subdivison-细分" class="headerlink" title="Subdivison 细分"></a>Subdivison 细分</h3><p>Loop Subdivison</p>
<ul>
<li>创建更多三角形</li>
<li>改变点的位置<br>是两步操作<br>对每个三角形连接三边中点，这样三角形数量增多<br>接下来调整三角形位置<br>这个算法命名和循环没关系<br>怎么移动新的顶点和老的顶点<br>新的顶点的移动：八分之三 A+B，八分之一 C+D。一个简单的加权平均<br>旧的顶点的移动：<br>顶点的度：这个顶点连接点的数量，n&#x3D;6，n：vertex degree<br>u 是和 n 有关系的数，关于 n 的函数<br>也是加权<br>细分完成</li>
</ul>
<p>Catmull-Clark Subdivsion 另一种细分方法 General Mesh<br>Loop subdivsion 只处理了三角形<br>这里开始有四边形<br>奇异点 Extraoridnary，度不为 4 的点。<br>quad-face 四边形面</p>
<p>每一条边取中点，每一个面也取中点，这些点全部连起来<br>经过一次细分后，还有多少奇异点呢？<br>多了 2 个奇异点，度为 3。和非四边形的数量有关。<br>细分之后所有的非四边形面都消失了，每一个非四边形面都会引入一个奇异点。说明之后奇异点再也不会增加了，只有第一次细分会增加奇异点。</p>
<p>调整点的位置，把点分成三类，</p>
<ul>
<li>边上的店</li>
<li>面上的店</li>
<li>老的店<br>三个点都是做平均<br>以上是曲面细分</li>
</ul>
<h3 id="曲面简化"><a href="#曲面简化" class="headerlink" title="曲面简化"></a>曲面简化</h3><p>某一个计算方法：边坍缩<br>那么我要坍缩哪些边呢？<br>Quadric Error Metrics 二次误差度量<br>把点放在某个位置最小化二次误差<br>L2 distance 相似<br>这个点和原本的几个面的距离的平方和</p>
<p>给每一条边都做二次误差，挑出正确的边，选二次度量误差最小的一个<br>坍缩一条边之后，会影响之前算过的二次误差，<br>有一种数据结构保证取最小值，动态更新受影响的元素</p>
<p>优先队列&#x2F;堆<br>贪心算法</p>
<h3 id="下面的话题：阴影-Shadow"><a href="#下面的话题：阴影-Shadow" class="headerlink" title="下面的话题：阴影 Shadow"></a>下面的话题：阴影 Shadow</h3><p>Shadow Mapping<br>图像空间的算法<br>生成阴影时不需要知道几何信息<br>问题有会产生走样现象</p>
<p>当点不在阴影里，说明光线和摄像机都能看到这个点。最重要的原理<br>经典的 shadowmapping，只能处理方向光 和 点光源<br>点要么在阴影里，要么不在阴影里，这个阴影叫硬阴影</p>
<p>Pass1：放一个虚拟相机放在光源处，生成这个光可以看到的点，记录所有点的深度信息<br>Pass2：从真正的摄像机，从光源看点，应该出现在我的摄像机的哪一个位置上，是个投影问题？当两张图中的点的深度信息是一致的，说明这个点就是不在阴影中，可见。<br>难以判断浮点数的深度相同<br>数值精度问题<br>引入 bias 偏差，优化一下相同问题<br>为什么阴影有锯齿，说明 shadowmap 的分辨率太低，走样</p>
<p>此时只能做硬阴影</p>
<p>软阴影怎么做？<br>在物理上叫做半影，<br>完全看不到光源，叫本影</p>
<p>对于点光源不可能出现软阴影。<br>有大小和方向的光会出现软阴影<br>而点光源没有大小，是一个理想的模型</p>
<hr>
<hr>
<h1 id="Lecture-13-Ray-Tracing-1"><a href="#Lecture-13-Ray-Tracing-1" class="headerlink" title="Lecture 13 Ray Tracing 1"></a>Lecture 13 Ray Tracing 1</h1><p>为什么要光线追踪？<br>光栅化无法很好地处理全局效果</p>
<ul>
<li>软阴影</li>
<li>glossy reflection 比如光滑的表面</li>
<li>间接光照 Indirect illumination 光线彼此之间的弹射</li>
</ul>
<p>一般情况下，人们认为光栅化是一种快速的，但是品质不高的渲染效果</p>
<p>光线追踪很准确，但是计算较慢<br>光栅化-实时，光线追踪-离线渲染</p>
<h2 id="基础光线追踪算法"><a href="#基础光线追踪算法" class="headerlink" title="基础光线追踪算法"></a>基础光线追踪算法</h2><ol>
<li>光沿直线传播</li>
<li>光线与光线不会碰撞</li>
<li>光线从光源到眼镜 reciprocity 光线的可逆性<br>光线假设全反射<br>光源是点光源</li>
</ol>
<p>eye ray&#x2F;camera ray<br>此时光线还只是直接的</p>
<h2 id="Recursive-Whitted-Style-Ray-Tracing"><a href="#Recursive-Whitted-Style-Ray-Tracing" class="headerlink" title="Recursive (Whitted-Style)Ray Tracing"></a>Recursive (Whitted-Style)Ray Tracing</h2><p>本质是一个递归算法</p>
<p>光线有折射和反射</p>
<p>光线分类</p>
<ul>
<li>Primary Ray</li>
<li>Secondary Rays</li>
<li>Shadow Rays</li>
</ul>
<p>以上是基本的原理<br>下面开始讲计算的原理</p>
<p>Ray Equation<br>求交点<br>数学上的光线，射线<br>r(t) &#x3D; o +td t&gt;&#x3D;0<br>Sphere： p：（p-c）平方 - R 平方 &#x3D; 0<br>数学上我们如何定义交点？这个点满足两个方程，即在光线又在球上<br>解一元二次方程</p>
<p>推广这个过程，定义一个点 p 满足某个方程，即在某个物体上<br>f（o+td） &#x3D; 0<br>解得是实数和正数</p>
<p>计算交给计算机</p>
<p>以上是对隐式表面</p>
<p>下面是对显式表面<br>光线和三角形求交</p>
<p>一个点在物体内 物体是封闭的，交点奇数为内，偶数为外</p>
<p>怎么做光线和三角形的交点？</p>
<ol>
<li>光线和平面怎么求交</li>
<li>交点在不在三角形里</li>
</ol>
<p>平面方程 Plane Equation<br>一个点和一个面法线定义一个面<br>p：（p-p’）·N &#x3D; 0<br>ax+by+cz+d&#x3D;0</p>
<p>Moller Trumbore MT 算法<br>结合三角形的重心坐标 这个算法解决了光线和三角形面求交的问题</p>
<p>把光线和每个三角形求交<br>如何加速计算？<br>有不同的方法<br>Bounding Volumes 包围体积 包围盒<br>一个长方体是三组不同的对面形成的交集<br>AABB 轴对齐包围盒 Axis-Aligned Bounding Box</p>
<p>两个线段的交集<br>t enter &#x3D; max(t min);t exit &#x3D; min(t max)</p>
<p>如果 t enter &lt; t exit 就是有交点，光线会留一段在 box 中</p>
<p>但是，光线不是一条直线<br>如果 t exit &lt; 0 ，说明这个盒子在光线的背后，不会有交点<br>如果 exit&gt;0,enter&lt;0 呢？ 说明光源在盒子里面<br>iff 当且仅当</p>
<p>为什么算碰撞盒？之前是直接算三角形，现在是算碰撞盒<br>计算被明显简化了</p>
<hr>
<hr>
<h1 id="Lecture-14-光线追踪-2-Acceleration-和-Radiometry"><a href="#Lecture-14-光线追踪-2-Acceleration-和-Radiometry" class="headerlink" title="Lecture 14 光线追踪 2 Acceleration 和 Radiometry"></a>Lecture 14 光线追踪 2 Acceleration 和 Radiometry</h1><p>加速结构<br>辐射度量学</p>
<p>GTC 英伟达 Gpu Tech 会议<br>DLss 2.0</p>
<p>从 AABB 加速计算开始</p>
<h2 id="Uniform-Spatial-Partitions"><a href="#Uniform-Spatial-Partitions" class="headerlink" title="Uniform Spatial Partitions"></a>Uniform Spatial Partitions</h2><h3 id="预处理"><a href="#预处理" class="headerlink" title="预处理"></a>预处理</h3><ol>
<li>找到包围盒</li>
<li>创建网格</li>
<li>判定哪些格子里会有物体，标记这些格子<br>开始光线追踪，假设一条光线开始，求光线和盒子的求交</li>
</ol>
<p>如何光栅化一条线，线会占据哪些像素呢。</p>
<p>画格子的加速效果如何呢？<br>如果就一个格子，就和原先一样<br>人们找到了一些在空间中如何划分格子的合适数量</p>
<p>在一个场景物体分布不均匀的场景中，分格子有点难</p>
<h2 id="Spatial-Partition-空间划分"><a href="#Spatial-Partition-空间划分" class="headerlink" title="Spatial Partition 空间划分"></a>Spatial Partition 空间划分</h2><p>更好地控制格子<br>案例：<br>空间划分结构：<br>![[Pasted image 20240702195023.png]]</p>
<ul>
<li>oct-tree 八叉树</li>
<li>KD-tree</li>
<li>BSP-tree</li>
</ul>
<h4 id="KD-Tree-Pre-Processing"><a href="#KD-Tree-Pre-Processing" class="headerlink" title="KD-Tree Pre-Processing"></a>KD-Tree Pre-Processing</h4><p>在中间的节点记录分开的情况，<br>在叶子节点记录相交的几何形体</p>
<p>![[Pasted image 20240702195639.png|300]]<br>数据结构<br>![[Pasted image 20240702200613.png]]</p>
<h3 id="通过物体划分-Object-Partitions-BVH-Bounding-Volume-Hierarchy"><a href="#通过物体划分-Object-Partitions-BVH-Bounding-Volume-Hierarchy" class="headerlink" title="通过物体划分 Object Partitions BVH Bounding Volume Hierarchy"></a>通过物体划分 Object Partitions BVH Bounding Volume Hierarchy</h3><p>解决了 Kdtree 的问题 一个几何结构出现在多个盒子里<br>不再划分空间<br>![[Pasted image 20240702201456.png]]</p>
<p>分割最长的轴<br>找第中位数个三角形</p>
<p>找中位数 不需要排序？<br>快速选择算法 受快速排序启发<br>复杂度是 O（n）</p>
<p>bvh 的结构<br>![[Pasted image 20240702203903.png|335]]</p>
<p>bvh 的计算<br>![[Pasted image 20240702204108.png|425]]</p>
<p>kdtree 与 bvh<br>![[Pasted image 20240702204125.png|375]]</p>
<p>以上是光线追踪怎么计算场景中的三角形</p>
<h3 id="下面是辐射度量学-Basic-radiometry"><a href="#下面是辐射度量学-Basic-radiometry" class="headerlink" title="下面是辐射度量学 Basic radiometry"></a>下面是辐射度量学 Basic radiometry</h3><p>对光的描述 精确定义 如何与物体作用<br>Radiant flux<br>intensity<br>irradiance<br>radiance</p>
<h4 id="Radiant-Energy-and-Flux（Power）"><a href="#Radiant-Energy-and-Flux（Power）" class="headerlink" title="Radiant Energy and Flux（Power）"></a>Radiant Energy and Flux（Power）</h4><p>Q 能量 ； J 焦耳，<br>φ（fai） 单位时间的能量 W 功率 瓦 ；lm &#x3D; lumen 流明 对光的功率定义</p>
<p>![[Pasted image 20240702205816.png|375]]</p>
<h4 id="Radiant-intensity"><a href="#Radiant-intensity" class="headerlink" title="Radiant intensity"></a>Radiant intensity</h4><p>单位立体角的能量<br>单位：lm&#x2F;sr &#x3D; cd &#x3D; candela<br>什么是立体角？<br>弧度 radians<br>立体角就是三维的延伸<br>![[Pasted image 20240702210246.png|350]]<br>面积除以半径平方 立体角<br>单位立体角&#x2F;微分立体角 dw<br>单位面积除以半径平方。<br>三维的极坐标 用 φ 和 θ<br>![[Pasted image 20240702210526.png|300]]<br>![[Pasted image 20240702210600.png|339]]</p>
<p>I &#x3D; φ&#x2F;4π<br>![[Pasted image 20240702210837.png]]</p>
<h1 id="Lecture-15-光线追踪-3-光线传播和全局光照"><a href="#Lecture-15-光线追踪-3-光线传播和全局光照" class="headerlink" title="Lecture 15 光线追踪 3 光线传播和全局光照"></a>Lecture 15 光线追踪 3 光线传播和全局光照</h1><p>回顾内容<br>Q Radiant Energy 很少被用在 CG 中<br>φ Radiant flux(power) φ &#x3D; dQ&#x2F;dt<br>I Radiant intensity i &#x3D; dφ&#x2F;dw w 是单位立体角<br>Solid Angle OMEGA &#x3D; A&#x2F;r 平方</p>
<h3 id="Irradiance"><a href="#Irradiance" class="headerlink" title="Irradiance"></a>Irradiance</h3><p>E(x) &#x3D; dφ&#x2F;dA [ lm&#x2F;m 平方 &#x3D; lux]<br>定义：在单位面积上每单位时间的收到的能量<br>unit area area 需要和入射光线垂直的 area，有的歪的面需要做一个投影<br>联系到兰伯特<br>E &#x3D; φ&#x2F;A</p>
<p>能量损失 Irradiance Falloff</p>
<h3 id="Radiance"><a href="#Radiance" class="headerlink" title="Radiance"></a>Radiance</h3><p>研究光线传播过程中 是一个过程<br>定义：在单位立体角中的单位面积的能量功率 个人 PS（Irradiance 和 intensity 结合）<br>单位面积上接受到的能量再沿着单位立体角的辐射<br>在 Irradiance 上再加上一个角度限制<br>![[Pasted image 20240703003156.png|350]]<br>Irradiance 与 Radiance 的关系<br>![[Pasted image 20240703003311.png|450]]</p>
<p>Irradiance 是单位面积内收到的总能量<br>Radiance 在此基础上固定角度</p>
<h2 id="BRDF-Bidirctional-Reflectance-Distribution-Function"><a href="#BRDF-Bidirctional-Reflectance-Distribution-Function" class="headerlink" title="BRDF Bidirctional Reflectance Distribution Function"></a>BRDF Bidirctional Reflectance Distribution Function</h2><p>双向反射分布函数</p>
<p>理解一下反射是什么：<br>找一个函数定义反射这个过程 同时包含面积 方向 时间的概念<br>![[Pasted image 20240703004117.png]]<br>在一个地方 考虑这个点接收到的能量，同时考虑这个点反射出去的能量<br>描述如何把接受到的能量反射出去的过程 反射的方向是什么？反射的多少<br>BRDF 就描述这如何实现<br>![[Pasted image 20240703004329.png|400]]<br>BRDF 描述光和物体是如何作用的<br>任何一个着色点，在任何光照点的输入，对一个观察点的影响的最终描述的方程<br>![[Pasted image 20240703004647.png|425]]</p>
<p>以上是反射方程，下面就有渲染方程</p>
<p>光线不断弹射 是一个递归</p>
<h4 id="从反射方程推渲染方程"><a href="#从反射方程推渲染方程" class="headerlink" title="从反射方程推渲染方程"></a>从反射方程推渲染方程</h4><p>没有考虑到物体自己的发光，<br>只要直接加上物体自己的光<br>摄像机接受到的光由两部分组成，自己发出的光和光线照射它反射出来的光<br>![[Pasted image 20240703005424.png|400]]</p>
<p>此时是单一点光源<br>![[Pasted image 20240703010416.png|450]]</p>
<p>多个点光源呢？把多个求和就行了<br>![[Pasted image 20240703010439.png]]</p>
<p>面光源呢？面光源是一堆点光源的集合<br>![[Pasted image 20240703010535.png]]</p>
<p>怎么处理其他物体反射的光？把物体反射的光也当成光源就行了<br>![[Pasted image 20240703010639.png]]</p>
<p>简写方程<br>![[Pasted image 20240703010837.png|450]]<br>继续简化，目的是为了解这个方程<br>![[Pasted image 20240703011052.png|400]]<br>求解方法<br>![[Pasted image 20240703011127.png|475]]<br>K 是反射操作符<br>![[Pasted image 20240703011310.png|475]]<br>对光线弹射次数的分解，</p>
<p>全局光照 &#x3D; 直接和间接光照的集合</p>
<p>光栅化可以做什么？只能做直接和一次弹射的光照，后面也能做，但是很难。<br>Two-bounce global illumination 两次弹射全局光照<br>最后会收敛到和现实差不多的光照</p>
<h4 id="简单的概率论回顾"><a href="#简单的概率论回顾" class="headerlink" title="简单的概率论回顾"></a>简单的概率论回顾</h4><p>X 随机变量<br>X~p（x）随机变量的分布</p>
<p>概率 p<br>期望 Expected Value</p>
<p>E[x] &#x3D; xi * pi<br>![[Pasted image 20240703014021.png|400]]</p>
<p>在连续情况上描述变量和概率</p>
<p>PDF probability Distribution Function<br>区域-概率<br>曲线叫概率密度函数<br>![[Pasted image 20240703014232.png|400]]</p>
<p>后面用蒙特卡洛积分要用到概率论的知识</p>
<hr>
<hr>
<h1 id="Lecture-16-光线追踪-4-Monte-Carlo-Path-Tracing"><a href="#Lecture-16-光线追踪-4-Monte-Carlo-Path-Tracing" class="headerlink" title="Lecture 16 光线追踪 4 Monte Carlo Path Tracing"></a>Lecture 16 光线追踪 4 Monte Carlo Path Tracing</h1><p>蒙特卡洛路径追踪</p>
<p>回顾<br>辐射度量学<br>双向分布反射方程 BRDF<br>渲染方程<br>理解渲染方程，递归的积分，算子，拆分光线弹射<br>简单的概率论</p>
<p>连续性随机变量 X 符合 p（x）概率密度分布 PDF<br>期望 E[x] &#x3D; x * p(x)</p>
<h2 id="蒙特卡洛积分-Integration"><a href="#蒙特卡洛积分-Integration" class="headerlink" title="蒙特卡洛积分 Integration"></a>蒙特卡洛积分 Integration</h2><p>解决一个定积分，<br>黎曼积分，拆成无数个长方形，取中点</p>
<p>直观的解释理解<br>蒙特卡洛中，不断采样，假设每次都是个长方形，所有长方形的面积加起来求平均</p>
<p>Sample on X，integrate on X</p>
<h2 id="Path-Tracing-路径追踪"><a href="#Path-Tracing-路径追踪" class="headerlink" title="Path Tracing 路径追踪"></a>Path Tracing 路径追踪</h2><p>从之前的光线追踪 不断弹射光线<br>Whitted-style ray tracing: - 在镜面上不断弹射，在漫表面停止弹射，还是个理想的光线追踪</p>
<p>改进这个算法<br>Specular 镜面<br>Glossy reflection 磨砂 有些许高光</p>
<p>Utah teapot 犹他壶</p>
<p>color bleed 是一个全局光照中的效果<br>Cornell box 康奈尔 box</p>
<p>解决渲染方程中的积分，用蒙特卡洛解积分</p>
<p>找 fx 和 pdf，fx 就是渲染方程，pdf 也就是概率，这里假设概率是平均的，p（w） &#x3D; 1&#x2F;2π</p>
<p>先做了较简单的直接光照的计算<br>接下来算多次的光线弹射</p>
<p>在伪代码中 加个递归</p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><ol>
<li>光线的数量会太多 有一个指数问题</li>
<li>递归的停止</li>
</ol>
<p>解决问题 1：假设只用一根光线 N &#x3D; 1 来做光线追踪和蒙特卡洛积分，就是路径追踪<br>解决问题 2：俄罗斯轮盘赌 Russian Roulette RR<br>用概率的方式停下来</p>
<p>SPP samples per pixel<br>光线会浪费，根据光源的大小<br>从受光面的积分写成对光源上的积分<br>微积分上的变量替换</p>
<p>现在直接对光源采样<br>对光源的光线不用 RR（俄罗斯轮盘赌）<br>对间接光照用 RR ，因为不是光源</p>
<p>对光线的采样就这样拆成了两部分</p>
<p>又有个问题，对光源采样时，光线被阻挡呢？<br>以上就完成了一个完整的 Path Tracing</p>
<p>没提到的话题：</p>
<ul>
<li>怎么对一个方向均匀采样</li>
<li>怎么采样一个函数</li>
<li>最好的选择的 PDF？</li>
<li>随机数影响效果 low discrepancy sequences<br>hemisphere-半球</li>
<li>结合半球和光源采样 multiple imp. sampling</li>
<li>像素中的平均方法 pixel reconstruction filter</li>
<li>得到的值还不是最后的颜色，还有 gamma 矫正 曲线 颜色空间</li>
</ul>
<hr>
<hr>
<h1 id="Lecture-17-Materials-and-Appearance"><a href="#Lecture-17-Materials-and-Appearance" class="headerlink" title="Lecture 17 Materials and Appearance"></a>Lecture 17 Materials and Appearance</h1><h2 id="材质"><a href="#材质" class="headerlink" title="材质"></a>材质</h2><p>漫反射 Diffuse Lambertian<br>漫反射系数<br>Irradiance &#x3D; radiance 如果物体不吸收光<br>![[Pasted image 20240703195845.png|450]]<br>albedo 反射率 0~1<br>一个正确的 diffuse 的 BRDF 是多少</p>
<p>Glossy Material BRDF</p>
<p>mod 求模<br>光的反射 给了两种表示<br>![[Pasted image 20240703202751.png]]</p>
<p>上面是反射<br>下面是折射</p>
<p>Refraction<br>costics 光线打到海水的表面</p>
<p>Snell’s law 斯内尔定律 就是 折射定律<br>![[Pasted image 20240703203337.png|450]]<br>IOR 折射率 n</p>
<p>算折射角的余弦<br>![[Pasted image 20240703203544.png|450]]</p>
<p>全反射 从折射率大的到折射率小的<br>Snell’s Window<br>![[Pasted image 20240703203718.png|450]]<br>transmit 折射<br>BSDF s-散射</p>
<p>菲涅尔 Fresnel Reflection 菲涅尔项<br>![[Pasted image 20240703204327.png|375]]</p>
<p>不用考虑极化现象的光</p>
<p>对于金属的菲涅尔和绝缘体的菲涅尔不一样</p>
<p>菲涅尔怎么计算呢？<br>有准确的和估算的<br>![[Pasted image 20240703205124.png|425]]</p>
<p>Microfacet Material 微表面模型<br>从远处看 看不到细节<br>微表面理论<br>远的是光滑的<br>近的是粗糙的<br>近处看几何 远处看材质<br>把表面也给微分，就是微表面<br>定义了光滑和粗糙<br>![[Pasted image 20240703205807.png|450]]<br>把粗糙程度 用微表面的法线分布来表示<br>微表面 BRDF<br>![[Pasted image 20240703210252.png]]<br>Shadow 是一个修正量 修正几乎平面的光线</p>
<p>微表面模型可以描述非常多的材质物体<br>PBR 和微表面模型有关</p>
<p>区分材质的方式<br>各向同性材质与各向异性材质<br>Isotropic Anisotropic</p>
<p>在 BRDF 中描述，<br>方位角—-入射角与反射角组成的<br>![[Pasted image 20240703211448.png|475]]<br>nylon 尼龙 velvet 天鹅绒 就是被子上的毛 ，可以用手给梳平</p>
<h3 id="测量-BRDF"><a href="#测量-BRDF" class="headerlink" title="测量 BRDF"></a>测量 BRDF</h3><hr>
<p>三菱与 MIT 的电子实验室</p>
<hr>
<hr>
<h1 id="Lecture-18-Advanced-Topics-in-Rendering"><a href="#Lecture-18-Advanced-Topics-in-Rendering" class="headerlink" title="Lecture 18:Advanced Topics in Rendering"></a>Lecture 18:Advanced Topics in Rendering</h1><p>简单提一下思想<br>不讲具体的计算</p>
<p>Advanced Light Transport 高级光线传播<br>无偏光线传播</p>
<p>光子映射<br>VCM</p>
<p>蒙特卡洛估计<br>—无偏—期望永远是对的<br>无穷多个样本最终会收敛</p>
<p>BDPT 双向路径追踪<br>会写这个，基本就会写渲染器</p>
<p>MLT Metropolis Light Transport<br>思想<br>用统计学上的工具，马尔科夫链 MCMC 生产样本<br>局部方法<br>适合做复杂的光路传播<br>难以计算收敛<br>容易得出很脏的渲染结果</p>
<p>光子映射 Photon Mapping<br>caustics 由聚焦形成的图案 国内的翻译叫焦散<br>![[Pasted image 20240704011703.png|400]]<br>计算局部密度估计 （ps：光流？）<br>![[Pasted image 20240704011749.png|350]]</p>
<hr>
<hr>
<h1 id="相机"><a href="#相机" class="headerlink" title="相机"></a>相机</h1><hr>
<hr>
<h1 id="光场"><a href="#光场" class="headerlink" title="光场"></a>光场</h1><p>我们是怎么看到世界的</p>
<p>这个过程也可以用函数描述 全光函数 — 7 个维度</p>
<p>颜色-光的波长<br>在定义光场前先回顾下光线</p>
<p>光场—全光函数的一小部分—二维的位置—二维的方向—四维函数（四个参数）<br>光场定义在物体表面</p>
<p>光场参数化 -u,v;s,t<br>![[Pasted image 20240705020952.png|450]]<br>uv 平面和 st 平面</p>
<p>苍蝇的眼睛-复眼-光场</p>
<h2 id="光场照相机"><a href="#光场照相机" class="headerlink" title="光场照相机"></a>光场照相机</h2><p>支持后期的重新聚焦</p>
<p>从一个像素变成记录一块像素，记录不同方向的光。一个像素原本的 Irradiance 被拆开了<br>![[Pasted image 20240705022344.png|450]]</p>
<p>光场照相机存在的问题 分辨率不足<br>用 100 个像素记录 1 个像素的信息<br>高成本</p>
<p>以上是光场的内容 uvst 平面<br>把 Irradiance 分成 radiance</p>
<p>以下讲颜色</p>
<h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><p>光谱<br>SPD 谱功率密度 Spectral Power Distribution<br>描述光在任何一个波长的分布是多少<br>颜色是混合出来的<br>混合—波的叠加</p>
<p>颜色是人的感知 颜色和人有关</p>
<p>人如何感知到颜色（给我放了一个人眼剖图）<br>感光细胞 Rentinal Photoreceptor Cells<br>Rod cell 棒状细胞 感知光的强度 不感知颜色 可以得到灰度图<br>Cone cell 锥状细胞 可以感知颜色<br>Cone cell 有分成 S M L 三种子细胞<br>S 感知短波光 short<br>M 感知中波长 middle<br>L 感知长波长 long</p>
<p>不同人眼中三种子细胞的分布不同，也就是说人与人之间存在对颜色的差异<br>综上根据生物学的研究，颜色是人感知的结果</p>
<p>看到的不是光谱，而是三个 S M L 细胞给你的结果</p>
<p>Metamerism 同色异谱<br>color matching</p>
<p>Color Reproduction<br>颜色混合<br>Additive Color<br>CIE RGB 系统</p>
<p>颜色空间<br>CIE XYZ 系统</p>
<p>Gamut 色域</p>
<p>HSV 颜色空间 Hue Saturation Value<br>CIELAB Space</p>
<p>人脑通过视觉暂觉会自动触发互补色</p>
<hr>
<hr>
<h1 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h1><p>1993 侏罗纪公园<br>1995 玩具总动员</p>
<p>动画曲线 几何曲线</p>
<p>物理模拟<br>F &#x3D; ma Force Mass Acceleration<br>![[Pasted image 20240706094618.png]]</p>
<p>布料模拟</p>
<p>液体模拟</p>
<ol>
<li>水的运动 形成</li>
<li>渲染</li>
</ol>
<p>绳子模拟</p>
<p>物理仿真和渲染分开看</p>
<p>A simple spring<br>质点弹簧系统<br>没有长度 胡克定律<br>l —-rest length</p>
<p>一点表示 1 阶导<br>二点表示二阶导</p>
<p>加入摩擦力</p>
<p>用弹簧模拟布<br>![[Pasted image 20240706110032.png]]</p>
<p>FEM 有限元方法 Finite Element Method</p>
<h2 id="粒子系统"><a href="#粒子系统" class="headerlink" title="粒子系统"></a>粒子系统</h2><p>鸟群算法<br>粒子系统是在定义个体与群体之间的关系</p>
<h2 id="运动学"><a href="#运动学" class="headerlink" title="运动学"></a>运动学</h2><p>Forward Kinematics 正向运动学<br>![[Pasted image 20240706122442.png]]<br>Inverse Kinematics 反向动力学<br>![[Pasted image 20240706122428.png]]<br>逆运动学有时候解不唯一<br>![[Pasted image 20240706122527.png]]</p>
<p>HOW？<br>优化问题—机器学习—梯度下降</p>
<h2 id="Rigging-绑定"><a href="#Rigging-绑定" class="headerlink" title="Rigging 绑定"></a>Rigging 绑定</h2><p>blend shapes</p>
<p>Motion Capture 动捕<br>一系列的控制点</p>
<p>![[Pasted image 20240706124540.png]]</p>
<hr>
<hr>
<h1 id="Lecture-22-Animation"><a href="#Lecture-22-Animation" class="headerlink" title="Lecture 22 Animation"></a>Lecture 22 Animation</h1><p>简单粒子模拟</p>
<p>速度场<br>ODE ordinary Differential Equation<br>一阶常微分方程<br>![[Pasted image 20240706130521.png|450]]<br>解方程<br>欧拉方程<br>递归的微分</p>
<p>问题：会迅速变得不稳定<br>误差：减少 delta T 来减少误差</p>
<p>稳定性：</p>
<p>刚体模拟</p>
<p>流体模拟</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">Kumoxjq</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/12/03/101/">http://example.com/2024/12/03/101/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2024/12/03/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Kumoxjq</div><div class="author-info-description">description</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#06-%E5%8F%8D%E8%B5%B0%E6%A0%B7%E5%92%8C%E6%B7%B1%E5%BA%A6%E7%BC%93%E5%86%B2"><span class="toc-number">1.</span> <span class="toc-text">06 反走样和深度缓冲</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%91%E7%8E%87%E3%80%81%E9%A2%91%E5%9F%9F"><span class="toc-number">1.1.</span> <span class="toc-text">频率、频域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BB%A4%E6%B3%A2"><span class="toc-number">1.2.</span> <span class="toc-text">滤波</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#convolution-%E5%8D%B7%E7%A7%AF"><span class="toc-number">2.</span> <span class="toc-text">convolution 卷积</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MSAA"><span class="toc-number">3.</span> <span class="toc-text">MSAA</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#FXAA-Fast-Approximate-AA"><span class="toc-number">3.1.</span> <span class="toc-text">FXAA Fast Approximate AA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TAA-Temporal-AA"><span class="toc-number">3.2.</span> <span class="toc-text">TAA Temporal AA</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8E%E6%8A%97%E9%94%AF%E9%BD%BF%E7%9B%B8%E5%85%B3%E7%9A%84%E6%A6%82%E5%BF%B5-%E2%80%93%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87-DLSS-Deep-Learning-SuperSample"><span class="toc-number">4.</span> <span class="toc-text">与抗锯齿相关的概念 –超分辨率 DLSS Deep Learning SuperSample</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#07-Z-buffering-%E6%B7%B1%E5%BA%A6%E7%BC%93%E5%86%B2"><span class="toc-number">5.</span> <span class="toc-text">07 Z buffering 深度缓冲</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9D%80%E8%89%B2-Shading"><span class="toc-number">5.1.</span> <span class="toc-text">着色 Shading</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">5.1.1.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">5.1.2.</span> <span class="toc-text">定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#blinn-phong"><span class="toc-number">5.1.2.1.</span> <span class="toc-text">blinn-phong</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%9A%84%E8%A1%B0%E5%87%8F"><span class="toc-number">5.1.2.2.</span> <span class="toc-text">光的衰减</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture8-Shadeing-2"><span class="toc-number">6.</span> <span class="toc-text">Lecture8 Shadeing 2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E5%85%89-specular"><span class="toc-number">6.0.1.</span> <span class="toc-text">高光 specular</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#cos-%E7%9A%84%E6%8C%87%E6%95%B0"><span class="toc-number">6.0.1.0.1.</span> <span class="toc-text">cos 的指数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%85%89"><span class="toc-number">6.0.2.</span> <span class="toc-text">环境光</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shadeing-frequency-%E7%9D%80%E8%89%B2%E9%A2%91%E7%8E%87"><span class="toc-number">6.1.</span> <span class="toc-text">Shadeing frequency 着色频率</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF"><span class="toc-number">6.2.</span> <span class="toc-text">渲染管线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%B9%E7%90%86%E6%98%A0%E5%B0%84"><span class="toc-number">6.3.</span> <span class="toc-text">纹理映射</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture9-Shading03-%E7%9D%80%E8%89%B2%E7%BB%93%E6%9D%9F-%E8%B4%B4%E5%9B%BE%E6%98%A0%E5%B0%84%E5%BA%94%E7%94%A8"><span class="toc-number">7.</span> <span class="toc-text">Lecture9 Shading03 着色结束 贴图映射应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E4%B8%89%E8%A7%92%E5%BD%A2%E5%86%85%E9%83%A8%E8%BF%9B%E8%A1%8C%E4%BB%BB%E6%84%8F%E7%82%B9%E7%9A%84%E6%8F%92%E5%80%BC-%E9%87%8D%E5%BF%83%E5%9D%90%E6%A0%87"><span class="toc-number">7.0.1.</span> <span class="toc-text">如何在三角形内部进行任意点的插值 重心坐标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B4%B4%E5%9B%BE%E5%A4%AA%E5%B0%8F%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F"><span class="toc-number">7.0.2.</span> <span class="toc-text">贴图太小了怎么办？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC-Bilinear-interpolation"><span class="toc-number">7.0.2.1.</span> <span class="toc-text">双线性插值 Bilinear interpolation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bicubic-%E8%BF%99%E5%9B%9E%E5%8F%96-4x4"><span class="toc-number">7.0.2.2.</span> <span class="toc-text">Bicubic 这回取 4x4</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B4%B4%E5%9B%BE%E5%A4%AA%E5%A4%A7%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F"><span class="toc-number">7.0.3.</span> <span class="toc-text">贴图太大了怎么办？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mipmap-%E5%85%81%E8%AE%B8%E5%81%9A%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2-%E5%BF%AB%E9%80%9F-%E8%BF%91%E4%BC%BC-%E6%AD%A3%E6%96%B9%E5%BD%A2%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.0.3.1.</span> <span class="toc-text">mipmap 允许做范围查询 快速 近似 正方形范围查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MIPMAP-%E7%9A%84%E9%99%90%E5%88%B6"><span class="toc-number">7.0.3.2.</span> <span class="toc-text">MIPMAP 的限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%84%E5%90%91%E5%BC%82%E6%80%A7%E8%BF%87%E6%BB%A4-Anisotropic-Filter-%E4%B8%80%E5%AE%9A%E8%A7%A3%E5%86%B3%E4%BA%86%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-number">7.0.3.3.</span> <span class="toc-text">各向异性过滤 Anisotropic Filter 一定解决了这个问题</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-10%EF%BC%9AGeometry-%E5%87%A0%E4%BD%95"><span class="toc-number">8.</span> <span class="toc-text">Lecture 10：Geometry 几何</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%B9%E7%90%86%E7%9A%84%E5%BA%94%E7%94%A8-Application-of-geometry"><span class="toc-number">8.1.</span> <span class="toc-text">纹理的应用 Application of geometry</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%B9%E7%90%86%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%BD%B1%E5%93%8D-shading"><span class="toc-number">8.1.0.1.</span> <span class="toc-text">纹理也可以影响 shading</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Normal-Map-Bump-Map"><span class="toc-number">8.1.0.2.</span> <span class="toc-text">Normal Map&#x2F;Bump Map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%81%8F%E7%A7%BB-%E4%BD%8D%E7%A7%BB%E8%B4%B4%E5%9B%BE-DisplacementMap"><span class="toc-number">8.1.0.3.</span> <span class="toc-text">偏移&#x2F;位移贴图 DisplacementMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%B9%E7%90%86%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%98%AF%E4%B8%89%E7%BB%B4%E7%9A%84"><span class="toc-number">8.1.0.4.</span> <span class="toc-text">纹理也可以是三维的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%B9%E7%90%86%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%AE%B0%E5%BD%95%E4%B9%8B%E5%89%8D%E5%B7%B2%E7%BB%8F%E7%AE%97%E5%A5%BD%E4%BA%86%E4%BF%A1%E6%81%AF"><span class="toc-number">8.1.0.5.</span> <span class="toc-text">纹理也可以记录之前已经算好了信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E5%87%A0%E4%BD%95%E7%9A%84%E9%83%A8%E5%88%86"><span class="toc-number">8.2.</span> <span class="toc-text">开始几何的部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E5%87%A0%E4%BD%95"><span class="toc-number">8.2.0.1.</span> <span class="toc-text">隐式几何</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E5%87%A0%E4%BD%95"><span class="toc-number">8.2.0.2.</span> <span class="toc-text">显式几何</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-11-%E5%87%A0%E4%BD%95-2-%E6%9B%B2%E7%BA%BF-Curves-and-Surface"><span class="toc-number">9.</span> <span class="toc-text">Lecture 11 几何 2 曲线 Curves and Surface</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F"><span class="toc-number">9.1.</span> <span class="toc-text">显式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B2%E7%BA%BF-Curves"><span class="toc-number">9.2.</span> <span class="toc-text">曲线 Curves</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B2%E9%9D%A2-Surfaces"><span class="toc-number">9.3.</span> <span class="toc-text">曲面 Surfaces</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-12-Geometry-3"><span class="toc-number">10.</span> <span class="toc-text">Lecture 12 Geometry 3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Subdivison-%E7%BB%86%E5%88%86"><span class="toc-number">10.0.1.</span> <span class="toc-text">Subdivison 细分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B2%E9%9D%A2%E7%AE%80%E5%8C%96"><span class="toc-number">10.0.2.</span> <span class="toc-text">曲面简化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E9%9D%A2%E7%9A%84%E8%AF%9D%E9%A2%98%EF%BC%9A%E9%98%B4%E5%BD%B1-Shadow"><span class="toc-number">10.0.3.</span> <span class="toc-text">下面的话题：阴影 Shadow</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-13-Ray-Tracing-1"><span class="toc-number">11.</span> <span class="toc-text">Lecture 13 Ray Tracing 1</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E7%AE%97%E6%B3%95"><span class="toc-number">11.1.</span> <span class="toc-text">基础光线追踪算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Recursive-Whitted-Style-Ray-Tracing"><span class="toc-number">11.2.</span> <span class="toc-text">Recursive (Whitted-Style)Ray Tracing</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-14-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA-2-Acceleration-%E5%92%8C-Radiometry"><span class="toc-number">12.</span> <span class="toc-text">Lecture 14 光线追踪 2 Acceleration 和 Radiometry</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Uniform-Spatial-Partitions"><span class="toc-number">12.1.</span> <span class="toc-text">Uniform Spatial Partitions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-number">12.1.1.</span> <span class="toc-text">预处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spatial-Partition-%E7%A9%BA%E9%97%B4%E5%88%92%E5%88%86"><span class="toc-number">12.2.</span> <span class="toc-text">Spatial Partition 空间划分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#KD-Tree-Pre-Processing"><span class="toc-number">12.2.0.1.</span> <span class="toc-text">KD-Tree Pre-Processing</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E7%89%A9%E4%BD%93%E5%88%92%E5%88%86-Object-Partitions-BVH-Bounding-Volume-Hierarchy"><span class="toc-number">12.2.1.</span> <span class="toc-text">通过物体划分 Object Partitions BVH Bounding Volume Hierarchy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E9%9D%A2%E6%98%AF%E8%BE%90%E5%B0%84%E5%BA%A6%E9%87%8F%E5%AD%A6-Basic-radiometry"><span class="toc-number">12.2.2.</span> <span class="toc-text">下面是辐射度量学 Basic radiometry</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Radiant-Energy-and-Flux%EF%BC%88Power%EF%BC%89"><span class="toc-number">12.2.2.1.</span> <span class="toc-text">Radiant Energy and Flux（Power）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Radiant-intensity"><span class="toc-number">12.2.2.2.</span> <span class="toc-text">Radiant intensity</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-15-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA-3-%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD%E5%92%8C%E5%85%A8%E5%B1%80%E5%85%89%E7%85%A7"><span class="toc-number">13.</span> <span class="toc-text">Lecture 15 光线追踪 3 光线传播和全局光照</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Irradiance"><span class="toc-number">13.0.1.</span> <span class="toc-text">Irradiance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Radiance"><span class="toc-number">13.0.2.</span> <span class="toc-text">Radiance</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BRDF-Bidirctional-Reflectance-Distribution-Function"><span class="toc-number">13.1.</span> <span class="toc-text">BRDF Bidirctional Reflectance Distribution Function</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E%E5%8F%8D%E5%B0%84%E6%96%B9%E7%A8%8B%E6%8E%A8%E6%B8%B2%E6%9F%93%E6%96%B9%E7%A8%8B"><span class="toc-number">13.1.0.1.</span> <span class="toc-text">从反射方程推渲染方程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84%E6%A6%82%E7%8E%87%E8%AE%BA%E5%9B%9E%E9%A1%BE"><span class="toc-number">13.1.0.2.</span> <span class="toc-text">简单的概率论回顾</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-16-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA-4-Monte-Carlo-Path-Tracing"><span class="toc-number">14.</span> <span class="toc-text">Lecture 16 光线追踪 4 Monte Carlo Path Tracing</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E7%A7%AF%E5%88%86-Integration"><span class="toc-number">14.1.</span> <span class="toc-text">蒙特卡洛积分 Integration</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Path-Tracing-%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA"><span class="toc-number">14.2.</span> <span class="toc-text">Path Tracing 路径追踪</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">14.2.0.1.</span> <span class="toc-text">问题</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-17-Materials-and-Appearance"><span class="toc-number">15.</span> <span class="toc-text">Lecture 17 Materials and Appearance</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%90%E8%B4%A8"><span class="toc-number">15.1.</span> <span class="toc-text">材质</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E9%87%8F-BRDF"><span class="toc-number">15.1.1.</span> <span class="toc-text">测量 BRDF</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-18-Advanced-Topics-in-Rendering"><span class="toc-number">16.</span> <span class="toc-text">Lecture 18:Advanced Topics in Rendering</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B8%E6%9C%BA"><span class="toc-number">17.</span> <span class="toc-text">相机</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%89%E5%9C%BA"><span class="toc-number">18.</span> <span class="toc-text">光场</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%89%E5%9C%BA%E7%85%A7%E7%9B%B8%E6%9C%BA"><span class="toc-number">18.1.</span> <span class="toc-text">光场照相机</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%9C%E8%89%B2"><span class="toc-number">18.1.1.</span> <span class="toc-text">颜色</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB"><span class="toc-number">19.</span> <span class="toc-text">动画</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B2%92%E5%AD%90%E7%B3%BB%E7%BB%9F"><span class="toc-number">19.1.</span> <span class="toc-text">粒子系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E5%8A%A8%E5%AD%A6"><span class="toc-number">19.2.</span> <span class="toc-text">运动学</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rigging-%E7%BB%91%E5%AE%9A"><span class="toc-number">19.3.</span> <span class="toc-text">Rigging 绑定</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-22-Animation"><span class="toc-number">20.</span> <span class="toc-text">Lecture 22 Animation</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/03/101/" title="Untitled">Untitled</a><time datetime="2024-12-03T10:32:13.508Z" title="Created 2024-12-03 18:32:13">2024-12-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/03/hello-world/" title="Hello World">Hello World</a><time datetime="2024-12-03T10:12:46.148Z" title="Created 2024-12-03 18:12:46">2024-12-03</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Kumoxjq</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>